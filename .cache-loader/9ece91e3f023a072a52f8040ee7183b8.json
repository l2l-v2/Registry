{"remainingRequest":"/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/thread-loader/dist/cjs.js??ref--10-2!/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/ts-loader/index.js??ref--10-3!/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/angular-router-loader/src/index.js!/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/tslint-loader/index.js!/home/bqzhu/Desktop/l2l-v2/l2l-registry/src/main/webapp/app/home/home.component.ts","dependencies":[{"path":"/home/bqzhu/Desktop/l2l-v2/l2l-registry/src/main/webapp/app/home/home.component.ts","mtime":1539162063840},{"path":"/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/angular2-template-loader/index.js","mtime":1536032724656},{"path":"/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/cache-loader/dist/cjs.js","mtime":1536032729131},{"path":"/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/thread-loader/dist/cjs.js","mtime":1536032751315},{"path":"/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/ts-loader/index.js","mtime":1536032751573},{"path":"/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/angular-router-loader/src/index.js","mtime":1538211611370},{"path":"/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/tslint-loader/index.js","mtime":1536032751850}],"contextDependencies":[],"result":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar core_1 = require(\"@angular/core\");\nvar ng_jhipster_1 = require(\"ng-jhipster\");\nvar shared_1 = require(\"app/shared\");\nvar admin_1 = require(\"app/admin\");\nvar registry_1 = require(\"app/registry\");\nvar refresh_service_1 = require(\"../shared/refresh/refresh.service\");\nvar app_constants_1 = require(\"app/app.constants\");\nvar eureka_status_service_1 = require(\"./eureka.status.service\");\nvar profile_service_1 = require(\"app/layouts/profiles/profile.service\");\nvar login_oauth2_service_1 = require(\"app/shared/oauth2/login-oauth2.service\");\nvar HomeComponent = /** @class */ (function () {\n    function HomeComponent(principal, loginModalService, loginOAuth2Service, eventManager, eurekaStatusService, applicationsService, healthService, profileService, refreshService) {\n        this.principal = principal;\n        this.loginModalService = loginModalService;\n        this.loginOAuth2Service = loginOAuth2Service;\n        this.eventManager = eventManager;\n        this.eurekaStatusService = eurekaStatusService;\n        this.applicationsService = applicationsService;\n        this.healthService = healthService;\n        this.profileService = profileService;\n        this.refreshService = refreshService;\n        this.version = app_constants_1.VERSION ? 'v' + app_constants_1.VERSION : '';\n        this.appInstances = [];\n    }\n    HomeComponent.prototype.ngOnInit = function () {\n        var _this = this;\n        this.principal.identity().then(function (account) {\n            _this.account = account;\n            if (!account || !_this.isAuthenticated()) {\n                _this.login();\n            }\n            else {\n                _this.refreshReloadSubscription = _this.refreshService.refreshReload$.subscribe(function (empty) { return _this.populateDashboard(); });\n                _this.populateDashboard();\n            }\n        });\n        this.registerAuthenticationSuccess();\n    };\n    HomeComponent.prototype.ngOnDestroy = function () {\n        if (this.refreshReloadSubscription) {\n            this.refreshReloadSubscription.unsubscribe();\n        }\n    };\n    HomeComponent.prototype.registerAuthenticationSuccess = function () {\n        var _this = this;\n        this.eventManager.subscribe('authenticationSuccess', function (message) {\n            _this.principal.identity().then(function (account) {\n                _this.account = account;\n                _this.populateDashboard();\n            });\n        });\n    };\n    HomeComponent.prototype.isAuthenticated = function () {\n        return this.principal.isAuthenticated();\n    };\n    HomeComponent.prototype.login = function () {\n        var _this = this;\n        this.profileService.getProfileInfo().then(function (profileInfo) {\n            if (profileInfo.activeProfiles.indexOf('oauth2') > -1) {\n                _this.loginOAuth2Service.login();\n            }\n            else {\n                _this.modalRef = _this.loginModalService.open();\n            }\n        });\n    };\n    HomeComponent.prototype.populateDashboard = function () {\n        var _this = this;\n        this.eurekaStatusService.findAll().subscribe(function (data) {\n            _this.status = data.status;\n        });\n        this.applicationsService.findAll().subscribe(function (data) {\n            _this.appInstances = [];\n            for (var _i = 0, _a = data.applications; _i < _a.length; _i++) {\n                var app = _a[_i];\n                for (var _b = 0, _c = app.instances; _b < _c.length; _b++) {\n                    var inst = _c[_b];\n                    inst.name = app.name;\n                    _this.appInstances.push(inst);\n                }\n            }\n        });\n        this.healthService.checkHealth().subscribe(function (response) {\n            _this.healthData = _this.healthService.transformHealthData(response);\n            _this.updatingHealth = false;\n        }, function (response) {\n            _this.healthData = _this.healthService.transformHealthData(response.data);\n            _this.updatingHealth = false;\n        });\n    };\n    HomeComponent.prototype.baseName = function (name) {\n        return this.healthService.getBaseName(name);\n    };\n    HomeComponent.prototype.subSystemName = function (name) {\n        this.healthService.getSubSystemName(name);\n    };\n    HomeComponent.prototype.getBadgeClass = function (statusState) {\n        if (statusState === 'UP') {\n            return 'badge-success';\n        }\n        else {\n            return 'badge-danger';\n        }\n    };\n    HomeComponent = tslib_1.__decorate([\n        core_1.Component({\n            selector: 'jhi-home',\n            templateUrl: './home.component.html',\n            styleUrls: ['home.scss']\n        }),\n        tslib_1.__metadata(\"design:paramtypes\", [typeof (_a = typeof shared_1.Principal !== \"undefined\" && shared_1.Principal) === \"function\" && _a || Object, typeof (_b = typeof shared_1.LoginModalService !== \"undefined\" && shared_1.LoginModalService) === \"function\" && _b || Object, typeof (_c = typeof login_oauth2_service_1.LoginOAuth2Service !== \"undefined\" && login_oauth2_service_1.LoginOAuth2Service) === \"function\" && _c || Object, typeof (_d = typeof ng_jhipster_1.JhiEventManager !== \"undefined\" && ng_jhipster_1.JhiEventManager) === \"function\" && _d || Object, typeof (_e = typeof eureka_status_service_1.EurekaStatusService !== \"undefined\" && eureka_status_service_1.EurekaStatusService) === \"function\" && _e || Object, typeof (_f = typeof registry_1.JhiApplicationsService !== \"undefined\" && registry_1.JhiApplicationsService) === \"function\" && _f || Object, typeof (_g = typeof admin_1.JhiHealthService !== \"undefined\" && admin_1.JhiHealthService) === \"function\" && _g || Object, typeof (_h = typeof profile_service_1.ProfileService !== \"undefined\" && profile_service_1.ProfileService) === \"function\" && _h || Object, typeof (_j = typeof refresh_service_1.JhiRefreshService !== \"undefined\" && refresh_service_1.JhiRefreshService) === \"function\" && _j || Object])\n    ], HomeComponent);\n    return HomeComponent;\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n}());\nexports.HomeComponent = HomeComponent;\n",{"version":3,"file":"/home/bqzhu/Desktop/l2l-v2/l2l-registry/src/main/webapp/app/home/home.component.ts","sourceRoot":"","sources":["/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/angular-router-loader/src/index.js!/home/bqzhu/Desktop/l2l-v2/l2l-registry/node_modules/tslint-loader/index.js!/home/bqzhu/Desktop/l2l-v2/l2l-registry/src/main/webapp/app/home/home.component.ts"],"names":[],"mappings":";;;AAAA,sCAA6D;AAE7D,2CAA8C;AAE9C,qCAAmE;AACnE,mCAA6C;AAC7C,yCAAsD;AACtD,qEAAsE;AAGtE,mDAA4C;AAC5C,iEAA8D;AAC9D,wEAAsE;AACtE,+EAA4E;AAO5E;IAWI,uBACY,SAAoB,EACpB,iBAAoC,EACpC,kBAAsC,EACtC,YAA6B,EAC7B,mBAAwC,EACxC,mBAA2C,EAC3C,aAA+B,EAC/B,cAA8B,EAC9B,cAAiC;QARjC,cAAS,GAAT,SAAS,CAAW;QACpB,sBAAiB,GAAjB,iBAAiB,CAAmB;QACpC,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,iBAAY,GAAZ,YAAY,CAAiB;QAC7B,wBAAmB,GAAnB,mBAAmB,CAAqB;QACxC,wBAAmB,GAAnB,mBAAmB,CAAwB;QAC3C,kBAAa,GAAb,aAAa,CAAkB;QAC/B,mBAAc,GAAd,cAAc,CAAgB;QAC9B,mBAAc,GAAd,cAAc,CAAmB;QAEzC,IAAI,CAAC,OAAO,GAAG,uBAAO,CAAC,CAAC,CAAC,GAAG,GAAG,uBAAO,CAAC,CAAC,CAAC,EAAE,CAAC;QAC5C,IAAI,CAAC,YAAY,GAAG,EAAE,CAAC;IAC3B,CAAC;IAED,gCAAQ,GAAR;QAAA,iBAYC;QAXG,IAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,UAAC,OAAO;YACnC,KAAI,CAAC,OAAO,GAAG,OAAO,CAAC;YACvB,EAAE,CAAC,CAAC,CAAC,OAAO,IAAI,CAAC,KAAI,CAAC,eAAe,EAAE,CAAC,CAAC,CAAC;gBACtC,KAAI,CAAC,KAAK,EAAE,CAAC;YACjB,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,yBAAyB,GAAG,KAAI,CAAC,cAAc,CAAC,cAAc,CAAC,SAAS,CAAC,UAAC,KAAK,IAAK,OAAA,KAAI,CAAC,iBAAiB,EAAE,EAAxB,CAAwB,CAAC,CAAC;gBACnH,KAAI,CAAC,iBAAiB,EAAE,CAAC;YAC7B,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,6BAA6B,EAAE,CAAC;IACzC,CAAC;IAED,mCAAW,GAAX;QACI,EAAE,CAAC,CAAC,IAAI,CAAC,yBAAyB,CAAC,CAAC,CAAC;YACjC,IAAI,CAAC,yBAAyB,CAAC,WAAW,EAAE,CAAC;QACjD,CAAC;IACL,CAAC;IAED,qDAA6B,GAA7B;QAAA,iBAOC;QANG,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,uBAAuB,EAAE,UAAC,OAAO;YACzD,KAAI,CAAC,SAAS,CAAC,QAAQ,EAAE,CAAC,IAAI,CAAC,UAAC,OAAO;gBACnC,KAAI,CAAC,OAAO,GAAG,OAAO,CAAC;gBACvB,KAAI,CAAC,iBAAiB,EAAE,CAAC;YAC7B,CAAC,CAAC,CAAC;QACP,CAAC,CAAC,CAAC;IACP,CAAC;IAED,uCAAe,GAAf;QACI,MAAM,CAAC,IAAI,CAAC,SAAS,CAAC,eAAe,EAAE,CAAC;IAC5C,CAAC;IAED,6BAAK,GAAL;QAAA,iBAQC;QAPG,IAAI,CAAC,cAAc,CAAC,cAAc,EAAE,CAAC,IAAI,CAAC,UAAC,WAAW;YAClD,EAAE,CAAC,CAAC,WAAW,CAAC,cAAc,CAAC,OAAO,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC;gBACpD,KAAI,CAAC,kBAAkB,CAAC,KAAK,EAAE,CAAC;YACpC,CAAC;YAAC,IAAI,CAAC,CAAC;gBACJ,KAAI,CAAC,QAAQ,GAAG,KAAI,CAAC,iBAAiB,CAAC,IAAI,EAAE,CAAC;YAClD,CAAC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAED,yCAAiB,GAAjB;QAAA,iBAyBC;QAxBG,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,UAAC,IAAI;YAC9C,KAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC9B,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,mBAAmB,CAAC,OAAO,EAAE,CAAC,SAAS,CAAC,UAAC,IAAI;YAC9C,KAAI,CAAC,YAAY,GAAG,EAAE,CAAC;YACvB,GAAG,CAAC,CAAc,UAAiB,EAAjB,KAAA,IAAI,CAAC,YAAY,EAAjB,cAAiB,EAAjB,IAAiB;gBAA9B,IAAM,GAAG,SAAA;gBACV,GAAG,CAAC,CAAe,UAAa,EAAb,KAAA,GAAG,CAAC,SAAS,EAAb,cAAa,EAAb,IAAa;oBAA3B,IAAM,IAAI,SAAA;oBACX,IAAI,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC;oBACrB,KAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAChC;aACJ;QACL,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC,SAAS,CACtC,UAAC,QAAQ;YACL,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,QAAQ,CAAC,CAAC;YACnE,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAChC,CAAC,EACD,UAAC,QAAQ;YACL,KAAI,CAAC,UAAU,GAAG,KAAI,CAAC,aAAa,CAAC,mBAAmB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC;YACxE,KAAI,CAAC,cAAc,GAAG,KAAK,CAAC;QAChC,CAAC,CACJ,CAAC;IACN,CAAC;IAED,gCAAQ,GAAR,UAAS,IAAY;QACjB,MAAM,CAAC,IAAI,CAAC,aAAa,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;IAChD,CAAC;IAED,qCAAa,GAAb,UAAc,IAAY;QACtB,IAAI,CAAC,aAAa,CAAC,gBAAgB,CAAC,IAAI,CAAC,CAAC;IAC9C,CAAC;IAED,qCAAa,GAAb,UAAc,WAAW;QACrB,EAAE,CAAC,CAAC,WAAW,KAAK,IAAI,CAAC,CAAC,CAAC;YACvB,MAAM,CAAC,eAAe,CAAC;QAC3B,CAAC;QAAC,IAAI,CAAC,CAAC;YACJ,MAAM,CAAC,cAAc,CAAC;QAC1B,CAAC;IACL,CAAC;IA9GQ,aAAa;QALzB,gBAAS,CAAC;YACP,QAAQ,EAAE,UAAU;YACpB,WAAW,EAAE,uBAAuB;YACpC,SAAS,EAAE,CAAC,WAAW,CAAC;SAC3B,CAAC;qEAayB,kBAAS,oBAAT,kBAAS,sDACD,0BAAiB,oBAAjB,0BAAiB,sDAChB,yCAAkB,oBAAlB,yCAAkB,sDACxB,6BAAe,oBAAf,6BAAe,sDACR,2CAAmB,oBAAnB,2CAAmB,sDACnB,iCAAsB,oBAAtB,iCAAsB,sDAC5B,wBAAgB,oBAAhB,wBAAgB,sDACf,gCAAc,oBAAd,gCAAc,sDACd,mCAAiB,oBAAjB,mCAAiB;OApBpC,aAAa,CA+GzB;IAAD,oBAAC;;CAAA,AA/GD,IA+GC;AA/GY,sCAAa","sourcesContent":["import { Component, OnInit, OnDestroy } from '@angular/core';\nimport { NgbModalRef } from '@ng-bootstrap/ng-bootstrap';\nimport { JhiEventManager } from 'ng-jhipster';\n\nimport { Account, LoginModalService, Principal } from 'app/shared';\nimport { JhiHealthService } from 'app/admin';\nimport { JhiApplicationsService } from 'app/registry';\nimport { JhiRefreshService } from '../shared/refresh/refresh.service';\nimport { Subscription } from 'rxjs/Subscription';\n\nimport { VERSION } from 'app/app.constants';\nimport { EurekaStatusService } from './eureka.status.service';\nimport { ProfileService } from 'app/layouts/profiles/profile.service';\nimport { LoginOAuth2Service } from 'app/shared/oauth2/login-oauth2.service';\n\n@Component({\n    selector: 'jhi-home',\n    templateUrl: './home.component.html',\n    styleUrls: ['home.scss']\n})\nexport class HomeComponent implements OnInit, OnDestroy {\n    account: Account;\n    modalRef: NgbModalRef;\n    updatingHealth: boolean;\n    healthData: any;\n    appInstances: any;\n    status: any;\n    version: string;\n\n    refreshReloadSubscription: Subscription;\n\n    constructor(\n        private principal: Principal,\n        private loginModalService: LoginModalService,\n        private loginOAuth2Service: LoginOAuth2Service,\n        private eventManager: JhiEventManager,\n        private eurekaStatusService: EurekaStatusService,\n        private applicationsService: JhiApplicationsService,\n        private healthService: JhiHealthService,\n        private profileService: ProfileService,\n        private refreshService: JhiRefreshService\n    ) {\n        this.version = VERSION ? 'v' + VERSION : '';\n        this.appInstances = [];\n    }\n\n    ngOnInit() {\n        this.principal.identity().then((account) => {\n            this.account = account;\n            if (!account || !this.isAuthenticated()) {\n                this.login();\n            } else {\n                this.refreshReloadSubscription = this.refreshService.refreshReload$.subscribe((empty) => this.populateDashboard());\n                this.populateDashboard();\n            }\n        });\n\n        this.registerAuthenticationSuccess();\n    }\n\n    ngOnDestroy() {\n        if (this.refreshReloadSubscription) {\n            this.refreshReloadSubscription.unsubscribe();\n        }\n    }\n\n    registerAuthenticationSuccess() {\n        this.eventManager.subscribe('authenticationSuccess', (message) => {\n            this.principal.identity().then((account) => {\n                this.account = account;\n                this.populateDashboard();\n            });\n        });\n    }\n\n    isAuthenticated() {\n        return this.principal.isAuthenticated();\n    }\n\n    login() {\n        this.profileService.getProfileInfo().then((profileInfo) => {\n            if (profileInfo.activeProfiles.indexOf('oauth2') > -1) {\n                this.loginOAuth2Service.login();\n            } else {\n                this.modalRef = this.loginModalService.open();\n            }\n        });\n    }\n\n    populateDashboard() {\n        this.eurekaStatusService.findAll().subscribe((data) => {\n            this.status = data.status;\n        });\n\n        this.applicationsService.findAll().subscribe((data) => {\n            this.appInstances = [];\n            for (const app of data.applications) {\n                for (const inst of app.instances) {\n                    inst.name = app.name;\n                    this.appInstances.push(inst);\n                }\n            }\n        });\n\n        this.healthService.checkHealth().subscribe(\n            (response) => {\n                this.healthData = this.healthService.transformHealthData(response);\n                this.updatingHealth = false;\n            },\n            (response) => {\n                this.healthData = this.healthService.transformHealthData(response.data);\n                this.updatingHealth = false;\n            }\n        );\n    }\n\n    baseName(name: string) {\n        return this.healthService.getBaseName(name);\n    }\n\n    subSystemName(name: string) {\n        this.healthService.getSubSystemName(name);\n    }\n\n    getBadgeClass(statusState) {\n        if (statusState === 'UP') {\n            return 'badge-success';\n        } else {\n            return 'badge-danger';\n        }\n    }\n}\n"]}]}